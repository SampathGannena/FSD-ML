<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password</title>
    <link rel="stylesheet" href="forgot.css">
</head>
<body>

    <div class="container">
        <!-- Welcome Panel -->
        <div class="welcome-panel">
            <h1>Forgot Your Password? ðŸ”‘</h1>
            <p>No worries! </p>
            <img src="image.jpg" alt="Study Finder Logo" class="welcome-image">
        </div>
        
        <!-- Forgot Password Form -->
        <div class="forgot-box">
            <h2>ðŸ”„ Reset Password</h2>
            <p>Enter your email and we'll send you a reset link.</p>
            <form id="forgot-form">
                <div class="input-group">
                    <input type="email" id="email" required>
                    <label>Email Address</label>
                </div>
                <!-- <div class="input-group">
                    <input type="email" id="email" required>
                    <label>Email Address</label>
                </div> -->

                <button type="submit" class="btn">Send Reset Link</button>
                <p class="signin-link">Remembered your password? <a href="signin.html">Sign In</a></p>
            </form>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notification-container"></div>

    <script>
        // Simple notification function
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notification-container');
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">
                        ${type === 'success' ? 'âœ“' : type === 'error' ? 'âœ•' : 'â„¹'}
                    </span>
                    <span class="notification-message">${message}</span>
                </div>
            `;
            
            // Add styles
            const style = document.createElement('style');
            style.textContent = `
                #notification-container {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 10000;
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }
                .notification {
                    background: rgba(26, 26, 46, 0.95);
                    backdrop-filter: blur(10px);
                    border-radius: 12px;
                    padding: 16px 20px;
                    min-width: 300px;
                    max-width: 400px;
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
                    border: 1px solid rgba(255, 107, 0, 0.3);
                    animation: slideIn 0.3s ease-out;
                }
                .notification.success {
                    border-color: #4caf50;
                }
                .notification.error {
                    border-color: #f44336;
                }
                .notification-content {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    color: #fff;
                }
                .notification-icon {
                    width: 24px;
                    height: 24px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    font-size: 14px;
                }
                .notification.success .notification-icon {
                    background: #4caf50;
                }
                .notification.error .notification-icon {
                    background: #f44336;
                }
                .notification.info .notification-icon {
                    background: #ff6b00;
                }
                .notification-message {
                    flex: 1;
                    font-size: 14px;
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(400px);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                @keyframes slideOut {
                    from {
                        transform: translateX(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateX(400px);
                        opacity: 0;
                    }
                }
            `;
            
            if (!document.getElementById('notification-styles')) {
                style.id = 'notification-styles';
                document.head.appendChild(style);
            }
            
            container.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    container.removeChild(notification);
                }, 300);
            }, 5000);
        }

        const form = document.getElementById('forgot-form');
        const submitBtn = form.querySelector('.btn');
      
        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          const email = document.getElementById('email').value;
      
          // Disable button and show loading
          const originalText = submitBtn.textContent;
          submitBtn.disabled = true;
          submitBtn.textContent = 'Sending...';
      
          try {
            const res = await fetch(`${window.location.origin}/api/auth/forgot-password`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ email })
            });
      
            const data = await res.json();
            
            if (res.ok) {
              showNotification(data.message || 'Reset link sent to your email!', 'success');
              form.reset();
            } else {
              showNotification(data.message || 'Failed to send reset link', 'error');
            }
          } catch (err) {
            console.error('Forgot password error:', err);
            showNotification('Error connecting to server. Please check if the server is running.', 'error');
          } finally {
            // Re-enable button
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
          }
        });
      </script>
      

</body>
</html>
